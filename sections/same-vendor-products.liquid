{% liquid
  assign section_id = section.id
%}

<section id="shopify-section-{{ section_id }}" class="same-vendor-products max-w-7xl mx-auto py-8">
  <h2 class="text-2xl font-bold mb-6 text-center">More from {{ product.vendor }}</h2>

  <!-- Swiper wrapper -->
  <div
    class="swiper mySwiper-{{ section_id }}"
    data-next-btn="swiper-button-next-{{ section_id }}"
    data-prev-btn="swiper-button-prev-{{ section_id }}"
    data-slides-per-view="3"
    data-slides-per-view-mobile="1"
  >
    <div class="swiper-wrapper">
      {% assign vendor_products = collections.all.products | where: 'vendor', product.vendor %}
      {% for p in vendor_products %}
        {% if p.id != product.id %}
          <div class="swiper-slide">
            <div class="product-card lg:w-60 bg-white rounded-lg p-4 shadow-sm hover:shadow-lg transition-all h-[350px] flex flex-col">
              <a href="{{ p.url }}" class="flex flex-col h-full">
                <div class="flex-shrink-0 mb-4">
                  <img
                    src="{{ p.featured_image | img_url: 'medium' }}"
                    alt="{{ p.title }}"
                    class="w-full h-40 object-cover rounded-md"
                    width=""
                    height=""
                  >
                </div>
                <div class="flex-grow">
                  <h3 class="text-lg font-semibold mb-2 line-clamp-2">{{ p.title }}</h3>
                  <p class="text-gray-700 font-medium">{{ p.price | money }}</p>
                </div>
                <div class="mt-4">
                  <button
                    aria-label="View Product"
                    class="w-full py-2 rounded-md bg-[#c42764] text-white hover:bg-[#f2bed2] hover:text-[#c42764] transition-colors"
                  >
                    View Product
                  </button>
                </div>
              </a>
            </div>
          </div>
        {% endif %}
      {% endfor %}
    </div>

    <!-- Navigation -->
    <div
      class="swiper-button-next swiper-button-next-{{ section_id }} text-white"
      aria-label="swiper-button-next-{{ section_id }}"
    ></div>
    <div
      class="swiper-button-prev swiper-button-prev-{{ section_id }} text-white"
      aria-label="swiper-button-prev-{{ section_id }}"
    ></div>
  </div>
</section>

{% schema %}
{
  "name": "Products from Same Vendor",
  "settings": [],
  "presets": [
    {
      "name": "Products from Same Vendor",
      "category": "Products"
    }
  ]
}
{% endschema %}
