{% liquid
  if section.settings.menu.links == blank
    assign main_menu_linklist = linklists[section.settings.menu].links
  else
    assign main_menu_linklist = section.settings.menu.links
  endif
%}

{% stylesheet %}
  .js-toggle-menu.active-submenu svg {
    transform: rotate(180deg);
    transition: transform 0.3s;
  }
{% endstylesheet %}

<!-- Footer Navigation for small screens -->
<footer class="fixed bottom-0 left-0 right-0 bg-white shadow-lg lg:hidden z-50 h-fit">
  <!-- search box dropdown for small screens -->
  <div id="mobile-search-box" class="container mx-auto px-4 py-8 bg-[#c42764] text-white hidden xl:hidden">
    <div class="flex items-center text-white">
      <textarea
        class="focus:outline-none border-gray-300 bg-transparent font-semibold text-sm pl-4 w-full"
        type="text"
        placeholder="I'm searching for ..."
      ></textarea>
      {% render 'icon-search' %}
    </div>
  </div>

  <div
    class="container mx-auto px-4 py-2 flex justify-around items-center relative bg-[#c42764] text-white rounded-t-3xl shadow-lg"
  >
    <a href="{{ routes.cart_url }}" class="flex flex-col items-center hover:text-white">
      {% render 'icon-cart' %}
      <span class="text-xs">Cart</span>
    </a>
    <!-- User Icon -->
    {% comment %}
      <a href="{{ routes.root_url }}" class="flex flex-col items-center hover:text-white">
        {% render 'icon-home' %}
        <span class="text-xs">home</span>
      </a>
    {% endcomment %}

    {% comment %}
      {%- if shop.customer_accounts_enabled -%}
        <a href="#" class="flex flex-col items-center hover:text-white">
          {% render 'icon-user' %}
          <span class="text-xs">Account</span>
        </a>
      {%- else -%}
        <!-- Favorites Icon -->
        <a href="#" class="flex flex-col items-center hover:text-white">
          {% render 'icon-favorite' %}
          <span class="text-xs">Favorites</span>
        </a>
      {% endif %}
    {% endcomment %}

    <!-- space in center bar -->
    <span class="flex flex-col items-center hover:text-white"> </span>

    <!-- Center Circular Icon -->
    <div
      class="absolute bg-white -top-10 left-1/2 transform -translate-x-1/2 rounded-full border-b border-gray-200 p-4 flex items-center justify-center"
    >
      <button class="flex mobile-navbar-burger border-none rounded-md focus:outline-none flex-col items-center">
        <div class="bg-[#c42764] h-10 w-10 rounded-full justify-center items-center flex">
          {% render 'icon-menu' %}
        </div>
      </button>
    </div>

    <!-- Cart Icon -->
    {% comment %}
      <a href="{{ routes.cart_url }}" class="flex flex-col items-center hover:text-white">
        {% render 'icon-cart' %}
        <span class="text-xs">Cart</span>
      </a>
    {% endcomment %}

    <!-- Search Icon -->
    <div class="flex flex-col items-center hover:text-white">
      <button
        id="search-toggle"
        class="border-none rounded-md focus:outline-none flex flex-col items-center hover:text-white"
      >
        {% render 'icon-search' %}
        <span class="text-xs">Search</span>
      </button>
    </div>
  </div>
</footer>

<div class="mobile-menu relative z-50 hidden">
  <div class="mobile-navbar-backdrop fixed inset-0 bg-gray-800 opacity-25"></div>
  <nav
    class="fixed top-0 left-0 bottom-0 flex flex-col w-full max-w-sm pt-6 bg-white shadow-md overflow-y-auto list-none"
  >
    <div class="flex items-center mb-8 px-5">
      <a class="mr-auto text-xl font-bold leading-none" href="#">
        {{ shop.name }}
      </a>
      <button class="mobile-navbar-close">
        {% render 'icon-close' %}
      </button>
    </div>
    {% for link in main_menu_linklist %}
      {% if link.links != blank %}
        <li class="relative w-full">
          <button
            class="text-sm px-8 flex flex-row items-center justify-between w-full h-12 js-toggle-menu {% if link.active == true or link.child_active == true %}text-white font-bold bg-[#c42764]{% endif %}"
            data-target="menu-{{ link.title | handleize }}"
            type="button"
          >
            {{ link.title }}
            {% render 'icon-chevron-down' %}
          </button>
          <div class="w-full border-t bg-white text-white z-10 hidden" id="menu-{{ link.title | handleize }}">
            <ul>
              {% for childlink in link.links %}
                <li class="hover:bg-gray-200 hover:text-[#c42764]">
                  <a class="block py-2 px-8" href="{{ childlink.url }}">
                    {{ childlink.title }}
                  </a>
                </li>
              {% endfor %}
            </ul>
          </div>
        </li>
      {% else %}
        <li class="w-full px-8 {% if link.active == true %}text-white font-bold bg-[#c42764]{% endif %}">
          <a
            class="text-sm flex justify-start items-center text-gray-400 hover:text-gray-500 w-full h-12"
            href="{{ link.url }}"
          >
            {{ link.title }}
          </a>
        </li>
      {% endif %}
    {% endfor %}
    <div class="mt-auto bg-[#c42764] py-3">
      <p class="text-xs text-center text-gray-400">
        <span>Copyright Â© 2024</span>
      </p>
    </div>
  </nav>
</div>

{% schema %}
{
  "name": "Mobile Navigational Bar",
  "settings": [
    {
      "type": "link_list",
      "id": "menu",
      "label": "Mobile Menu",
      "default": "main-menu"
    }
  ]
}
{% endschema %}
