{% liquid
  assign section_id = section.id
  assign main_product = all_products[section.settings.main_product]
  assign sub_info_type = section.settings.sub_info_type
%}
<section id="shopify-section-{{ section_id }}" class="featured-product-group max-w-7xl mx-auto py-8 px-0 md:px-4">
  <div class="grid grid-cols-1 md:grid-cols-2 gap-6 items-stretch">
    
    <!-- المنتج الكبير -->
    {% if main_product %}
      <div class="relative main-product max-h-[420px] rounded-lg overflow-hidden">
        {% render 'image',
          image: main_product.featured_image,
          class: 'w-full h-full object-cover',
          alt: main_product.title
        %}
        <div class="absolute inset-0 flex flex-col justify-center items-start p-6 md:p-12">
          <h2 class="text-white text-2xl md:text-3xl font-bold mb-4">
            High-end watches
          </h2>
          <a 
            href="{{ main_product.url }}"
            class="bg-white text-black font-medium px-6 py-2 rounded-full shadow hover:bg-gray-100 transition"
          >
            See Collection
          </a>
        </div>
      </div>
    {% endif %}

    <!-- المنتجات الجانبية -->
    <div class="product-list grid grid-rows-3 gap-1 h-full w-full" x-data="{ layoutType: 'horizontal' }">
      {% for block in section.blocks %}
        {% liquid
          assign product = all_products[block.settings.product]
        %}
        {% if product %}
          {%- render 'product-card', product: product -%}
        {% endif %}
      {% endfor %}
    </div>
  </div>
</section>

{% schema %}
{
  "name": "Featured Product Group",
  "settings": [
    {
      "type": "product",
      "id": "main_product",
      "label": "Main Product (Large Image)"
    },
    {
      "type": "select",
      "id": "sub_info_type",
      "label": "Sub Product Extra Info",
      "default": "description",
      "options": [
        { "value": "description", "label": "Show Description" },
        { "value": "vendor", "label": "Show Vendor" },
        { "value": "none", "label": "Show Nothing" }
      ]
    }
  ],
  "blocks": [
    {
      "type": "product_block",
      "name": "Product",
      "settings": [
        {
          "type": "product",
          "id": "product",
          "label": "Select Product"
        }
      ]
    }
  ],
  "max_blocks": 3,
  "presets": [
    {
      "name": "Featured Product Group",
      "category": "Products",
      "blocks": [{ "type": "product_block" }, { "type": "product_block" }, { "type": "product_block" }]
    }
  ]
}
{% endschema %}
