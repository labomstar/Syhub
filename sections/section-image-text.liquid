{% liquid
  assign section_image = section.settings.image
  assign section_image_title = section.settings.section_image_title
  assign section_image_description = section.settings.section_image_description
  assign section_image_button = section.settings.section_image_button
  assign section_product_url = section.settings.section_product.url
  assign button_text = section.settings.button_text
  assign text_alignment = section.settings.text_alignment
  case section.settings.text_position
    when 'right'
      assign text_position = 'md:flex-row flex-col'
    when 'left'
      assign text_position = 'md:flex-row-reverse flex-col'
    when 'top'
      assign text_position = 'flex-col-reverse'
    when 'bottom'
      assign text_position = 'flex-col'
    else
      assign text_position = 'flex-col'
  endcase
  if section.settings.image_border == 'all'
    assign image_border_class = 'border-' | append: section.settings.image_border_size
  else
    assign image_border_class = 'border-' | append: section.settings.image_border | append: '-' | append: section.settings.image_border_size
  endif
  assign image_border_class = image_border_class | append: ' ' | append: section.settings.image_border_style
  if section.settings.image_border_color != '#ffffff'
    assign image_border_class = image_border_class | append: ' border-[' | append: section.settings.image_border_color | append: ']'
  endif
  assign image_padding_class = 'p-' | append: section.settings.image_padding
  assign image_corner = section.settings.image_rounded_corners
  case image_corner
    when 'lt'
      assign image_rounded = 'rounded-tl-' | append: section.settings.image_rounded
    when 'rt'
      assign image_rounded = 'rounded-tr-' | append: section.settings.image_rounded
    when 'lb'
      assign image_rounded = 'rounded-bl-' | append: section.settings.image_rounded
    when 'rb'
      assign image_rounded = 'rounded-br-' | append: section.settings.image_rounded
    when 'l'
      assign image_rounded = 'rounded-l-' | append: section.settings.image_rounded
    when 'r'
      assign image_rounded = 'rounded-r-' | append: section.settings.image_rounded
    when 't'
      assign image_rounded = 'rounded-t-' | append: section.settings.image_rounded
    when 'b'
      assign image_rounded = 'rounded-b-' | append: section.settings.image_rounded
    when 'all'
      assign image_rounded = 'rounded-' | append: section.settings.image_rounded
  endcase
-%}

<article>
  <div class="w-full py-12">
    <div class="w-full mx-auto">
      <div
        class="{{ text_position }} flex"
      >
        {%- comment -%} ÿµŸàÿ±ÿ© {%- endcomment -%}
        <div
          class="
            relative w-full overflow-hidden
            {{ image_padding_class }} {{ image_border_class }} {{ image_rounded }}
            {% if text_position == 'right' %} md:w-1/2 {% endif %}
            {% if text_position == 'left' %} md:w-1/2 {% endif %}
          "
        >
          <figure class="relative">
            <picture class="block">
              {% if section_image %}
                <img
                  src="{{ section_image | file_url | replace: 'files/files/', 'files/' }}"
                  width="640"
                  height="500"
                  alt="Image description"
                  class="object-cover w-full h-[500px] {{ image_rounded }}"
                  loading="lazy"
                >
              {% else %}
                {{ 'product-1' | placeholder_svg_tag: 'w-full h-48 object-cover' }}
              {% endif %}
            </picture>

            {% if text_position == 'inside' %}
              <div class="absolute inset-0 flex flex-col items-center justify-center text-white text-center px-6">
                <h2 class="text-2xl font-bold drop-shadow">{{ section_image_title }}</h2>
                <p class="mt-2">{{ section_image_description }}</p>
                {% if section_image_button %}
                  <a
                    href="{{ section_product_url }}"
                    class="mt-4 bg-white text-black px-4 py-2 rounded-lg font-semibold"
                  >
                    {{ button_text }}
                  </a>
                {% endif %}
              </div>
            {% endif %}
          </figure>
        </div>

        {%- comment -%} ÿßŸÑŸÜÿµ (ÿ®ÿ±ÿß ÿßŸÑÿµŸàÿ±ÿ©) {%- endcomment -%}
        {% unless text_position == 'inside' %}
          <div class="w-full md:w-1/2 flex flex-col justify-center p-6 {{ text_alignment }}">
            <h2 class="text-2xl font-bold">{{ section_image_title }}</h2>
            <p class="mt-2 text-gray-600">{{ section_image_description }}</p>
            {% if section_image_button %}
              <a href="{{ section_product_url }}" class="mt-4 text-blue-600 font-semibold">
                {{ button_text }}
              </a>
            {% endif %}
          </div>
        {% endunless %}
      </div>
    </div>
  </div>
</article>

{% schema %}
{
  "name": "Image With Flexible Text",
  "settings": [

    {
      "type": "header",
      "content": "üì∑ Image Settings"
    },
    {
      "id": "image",
      "type": "image_picker",
      "label": "Choose an image"
    },
    {
      "type": "select",
      "id": "image_rounded",
      "label": "Image Border Radius",
      "options": [
        { "value": "sm", "label": "Small" },
        { "value": "md", "label": "Medium" },
        { "value": "lg", "label": "Large" },
        { "value": "xl", "label": "Extra Large" },
        { "value": "2xl", "label": "2X Large" },
        { "value": "3xl", "label": "3X Large" },
        { "value": "4xl", "label": "4X Large" },
        { "value": "full", "label": "Full" }
      ],
      "default": "md"
    },
    {
      "type": "select",
      "id": "image_rounded_corners",
      "label": "Image Corner Sides",
      "options": [
        { "value": "lt", "label": "Left Top" },
        { "value": "rt", "label": "Right Top" },
        { "value": "lb", "label": "Left Bottom" },
        { "value": "rb", "label": "Right Bottom" },
        { "value": "l", "label": "Left" },
        { "value": "r", "label": "Right" },
        { "value": "t", "label": "Top" },
        { "value": "b", "label": "Bottom" },
        { "value": "all", "label": "All" }
      ],
      "default": "all"
    },
    {
      "type": "range",
      "id": "image_padding",
      "label": "Image Padding",
      "min": 0,
      "max": 8,
      "step": 2,
      "default": 0
    },

    
    {
      "type": "header",
      "content": "üé® Image Border Settings"
    },
    {
      "type": "select",
      "id": "image_border",
      "label": "Image Border",
      "options": [
        { "value": "l", "label": "Left" },
        { "value": "r", "label": "Right" },
        { "value": "t", "label": "Top" },
        { "value": "b", "label": "Bottom" },
        { "value": "all", "label": "All" }
      ]
    },
    {
      "type": "select",
      "id": "image_border_style",
      "label": "Image Border Style",
      "options": [
        { "value": "border-solid", "label": "Solid" },
        { "value": "border-dashed", "label": "Dashed" },
        { "value": "border-dotted", "label": "Dotted" },
        { "value": "border-double", "label": "Double" }
      ]
    },
    {
      "type": "color",
      "id": "image_border_color",
      "label": "Image Border Color",
      "default": "#ffffff"
    },
    {
      "type": "range",
      "id": "image_border_size",
      "label": "Image Border Size",
      "min": 0,
      "max": 8,
      "step": 2,
      "default": 2
    },
    
    {
      "type": "header",
      "content": "üìù Text Settings"
    },
    {
      "type": "select",
      "id": "text_position",
      "label": "Text Position",
      "options": [
        { "value": "top", "label": "Above Image" },
        { "value": "bottom", "label": "Below Image" },
        { "value": "left", "label": "Left of Image" },
        { "value": "right", "label": "Right of Image" },
        { "value": "inside", "label": "Inside Image" }
      ],
      "default": "bottom"
    },
    {
      "type": "text",
      "id": "section_image_title",
      "label": "Image Title",
      "default": "Image Title"
    },
    {
      "type": "textarea",
      "id": "section_image_description",
      "label": "Image Description",
      "default": "Write your description here"
    },
    {
      "type": "select",
      "id": "text_alignment",
      "label": "Text Alignment",
      "options": [
        { "value": "text-left", "label": "Left" },
        { "value": "text-center", "label": "Center" },
        { "value": "text-right", "label": "Right" }
      ],
      "default": "text-center"
    },

    {
      "type": "header",
      "content": "üîò Button Settings"
    },
    {
      "type": "checkbox",
      "id": "section_image_button",
      "label": "Enable Button",
      "default": true
    },
    {
      "type": "text",
      "id": "button_text",
      "label": "Button Text",
      "default": "Learn More"
    },

    {
      "type": "header",
      "content": "üõí Product Settings"
    },
    {
      "type": "product",
      "id": "section_product",
      "label": "Select Product"
    }
  ],
  "presets": [
    {
      "name": "Image With Flexible Text"
    }
  ]
}
{% endschema %}

