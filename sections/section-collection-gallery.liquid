<section id="shopify-section-{{ section.id }}" class="collection-gallery max-w-7xl mx-auto py-8 px-4">
  <h2 class="text-2xl font-semibold mb-6">{{ section.settings.title_section }}</h2>

  <!-- Swiper Container -->
  <div
    class="swiper mySwiper-{{ section.id }}"
    data-next-btn="swiper-button-next-{{ section.id }}"
    data-prev-btn="swiper-button-prev-{{ section.id }}"
    data-slides-per-view="5"
    data-slides-per-view-mobile="2"
  >
    <div class="swiper-wrapper">
      {% for block in section.blocks %}
        {% assign collection = block.settings.collection %}
        {% assign collection_image = block.settings.collection_image %}

        {% if collection and collection_image %}
          <div class="swiper-slide flex justify-center aspect-[1/1]">
            <a
              href="{{ collection.url }}"
              class="flex flex-col group transform transition duration-300 hover:-translate-y-2 w-fit"
              aria-label="{{ collection.title }}"
            >
              <div class="overflow-hidden rounded-lg shadow-md hover:shadow-xl transition w-fit">
                {% render 'image',
                  image: collection_image,
                  alt: collection.title,
                  width: 400,
                  height: 400,
                  class: 'object-contain w-full h-full grayscale group-hover:grayscale-0 transition duration-300 ease-in-out',
                  loading: 'lazy'
                %}
              </div>
              <h3 class="mt-3 text-center text-base font-medium group-hover:text-indigo-600">
                {{ collection.title }}
              </h3>
            </a>
          </div>
        {% endif %}
      {% endfor %}
    </div>

    <!-- Controls -->
    <div class="swiper-button-next swiper-button-next-{{ section.id }} !text-black"></div>
    <div class="swiper-button-prev swiper-button-prev-{{ section.id }} !text-black"></div>
  </div>
</section>

{% schema %}
{
  "name": "Collection Gallery",
  "settings": [
    {
      "type": "text",
      "id": "title_section",
      "label": "Section Title"
    }
  ],
  "blocks": [
    {
      "type": "collection_block",
      "name": "Collection",
      "settings": [
        {
          "type": "collection",
          "id": "collection",
          "label": "Choose Collection"
        },
        {
          "type": "image_picker",
          "id": "collection_image",
          "label": "Custom Image"
        }
      ]
    }
  ],
  "max_blocks": 20,
  "presets": [
    {
      "name": "Collection Gallery",
      "category": "Images"
    }
  ]
}
{% endschema %}
