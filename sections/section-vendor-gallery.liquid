{% liquid
  assign section_id = section.id
  assign title = section.settings.title_section
  assign slides_desktop = 8
  assign slides_mobile = 3
%}

<section id="shopify-section-{{ section_id }}" class="vendor-gallery max-w-7xl mx-auto py-12 px-6">
  {% if title != blank %}
    <h2 class="text-3xl font-bold mb-8 text-center text-gray-800 tracking-wide">
      {{ title }}
    </h2>
  {% endif %}

  <!-- Swiper Container -->
  <div
    class="swiper mySwiper-{{ section_id }}"
    data-next-btn="swiper-button-next-{{ section_id }}"
    data-prev-btn="swiper-button-prev-{{ section_id }}"
    data-slides-per-view="{{ slides_desktop }}"
    data-slides-per-view-mobile="{{ slides_mobile }}"
  >
    <div class="swiper-wrapper items-center">
      {% for block in section.blocks %}
        {% liquid
          assign vendor_name = block.settings.vendor_name
          assign vendor_image = block.settings.vendor_image | image_url: width: 300
        %}

        {% if vendor_name and vendor_image %}
          <div class="swiper-slide flex justify-center aspect-[1/1]">
            <a
              href="/collections/vendors?q={{ vendor_name | url_encode }}"
              class="block group p-3 rounded-xl bg-white shadow-sm hover:shadow-md transition transform hover:-translate-y-1"
              aria-label="{{ vendor_name | default: section_id }}"
            >
              {% render 'image',
                image: vendor_image,
                alt: vendor_name,
                width: 300,
                height: 300,
                class: 'object-contain w-full h-full grayscale group-hover:grayscale-0 transition duration-300 ease-in-out',
                loading: 'lazy'
              %}
            </a>
          </div>
        {% endif %}
      {% endfor %}
    </div>

    <!-- Controls -->
    <div
      class="swiper-button-next swiper-button-next-{{ section_id }} !text-gray-700 hover:!text-black transition"
    ></div>
    <div
      class="swiper-button-prev swiper-button-prev-{{ section_id }} !text-gray-700 hover:!text-black transition"
    ></div>
  </div>
</section>

{% schema %}
{
  "name": "Vendor Gallery",
  "settings": [
    {
      "type": "text",
      "id": "title_section",
      "label": "Title for brands list"
    }
  ],
  "blocks": [
    {
      "type": "vendor_block",
      "name": "Vendor",
      "settings": [
        {
          "type": "text",
          "id": "vendor_name",
          "label": "Vendor Name (exact)"
        },
        {
          "type": "image_picker",
          "id": "vendor_image",
          "label": "Vendor Image"
        }
      ]
    }
  ],
  "max_blocks": 20,
  "presets": [
    {
      "name": "Vendor Gallery",
      "category": "Images"
    }
  ]
}
{% endschema %}
