{% comment %}
  Announcement Bar Section
  This section allows for the display of an announcement bar with customizable blocks.
{% endcomment %}

{% if section.settings.enable_announcement_bar %}
  <div class="announcement-bar">
    {% for block in section.blocks %}
      {% case block.type %}
        {% when 'plain-text-block' %}
          {% assign scheme = block.settings.color_scheme.settings %}
          <p
            style="
              color: {{ scheme.text }};
              font-size: {{ block.settings.font_size }}px;
              font-weight: {{ block.settings.font_weight }};
              font-style: {{ block.settings.font_style }};
            "
          >
            {{ block.settings.text }}
          </p>
        {% when 'rich-text-block' %}
          {% assign scheme = block.settings.color_scheme.settings %}
          <div style="color: {{ scheme.text }};">
            {{ block.settings.rich_text }}
          </div>
      {% endcase %}
    {% endfor %}
  </div>
{% endif %}

{% schema %}
{
  "name": "Announcement Bar",
  "tag": "section",
  "max_blocks": 10,
  "blocks": [
    {
      "type": "plain-text-block",
      "name": "Plain Text Block",
      "settings": [
        { "type": "text", "id": "text", "label": "Text", "default": "This is plain text." },
        { "type": "range", "id": "font_size", "label": "Font Size", "default": 16, "min": 12, "max": 48, "step": 1 },
        {
          "type": "select",
          "id": "font_weight",
          "label": "Font Weight",
          "default": "normal",
          "options": [
            { "value": "normal", "label": "Normal" },
            { "value": "bold", "label": "Bold" },
            { "value": "lighter", "label": "Light" }
          ]
        },
        {
          "type": "select",
          "id": "font_style",
          "label": "Font Style",
          "default": "normal",
          "options": [
            { "value": "normal", "label": "Normal" },
            { "value": "italic", "label": "Italic" }
          ]
        },
        { "type": "color_scheme", "id": "color_scheme", "label": "Color Scheme", "default": "scheme-1" }
      ]
    },
    {
      "type": "rich-text-block",
      "name": "Rich Text Block",
      "settings": [
        { "type": "richtext", "id": "rich_text", "label": "Rich Text", "default": "<p>This is rich text.</p>" },
        { "type": "color_scheme", "id": "color_scheme", "label": "Color Scheme", "default": "scheme-1" }
      ]
    }
  ],
  "presets": [
    {
      "name": "Default",
      "blocks": [{ "type": "plain-text-block" }, { "type": "rich-text-block" }]
    }
  ]
}
{% endschema %}
