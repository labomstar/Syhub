{% doc %}
  Renders a group of blocks with configurable layout direction, gap,
  alignment, padding, and max dimensions.

  All settings apply to one dimension to reduce configuration complexity.
{% enddoc %}

<div
  class="group {{ block.settings.layout_direction }}"
  style="
    --padding-top: {{ block.settings.padding_top }}px;
    --padding-bottom: {{ block.settings.padding_bottom }}px;
    --padding-left: {{ block.settings.padding_left }}px;
    --padding-right: {{ block.settings.padding_right }}px;
    --alignment: {{ block.settings.alignment }};
    --justify: {{ block.settings.justify }};
    --gap: {{ block.settings.gap }}px;
    --max-width: {{ block.settings.max_width }}%;
    --max-height: {{ block.settings.max_height }}px;
  "
  {{ block.shopify_attributes }}
>
  {% content_for 'blocks' %}
</div>

{% stylesheet %}
.group {
  display: flex;
  flex-wrap: nowrap;
  width: 100% !important;
  gap: var(--gap, 0px);
  max-width: var(--max-width, 100%);
  max-height: var(--max-height, none);
}

.group--horizontal {
  flex-direction: row;
  justify-content: var(--justify, space-between);
  align-items: var(--alignment, center);
  padding: var(--padding-top) var(--padding-right) var(--padding-bottom) var(--padding-left);
}

.group--vertical {
  flex-direction: column;
  justify-content: var(--justify, flex-start);
  align-items: var(--alignment, flex-start);
  padding: var(--padding-top) var(--padding-right) var(--padding-bottom) var(--padding-left);
}
{% endstylesheet %}

{% schema %}
{
  "name": "t:general.group",
  "class": "w-full",
  "blocks": [{ "type": "@theme" }],
  "settings": [
    {
      "type": "select",
      "id": "layout_direction",
      "label": "t:labels.layout_direction",
      "default": "group--vertical",
      "options": [
        { "value": "group--horizontal", "label": "t:options.direction.horizontal" },
        { "value": "group--vertical", "label": "t:options.direction.vertical" }
      ]
    },
    {
      "visible_if": "{{ block.settings.layout_direction == 'group--vertical' }}",
      "type": "select",
      "id": "alignment",
      "label": "t:labels.alignment",
      "default": "flex-start",
      "options": [
        { "value": "flex-start", "label": "t:options.alignment.left" },
        { "value": "center", "label": "t:options.alignment.center" },
        { "value": "flex-end", "label": "t:options.alignment.right" }
      ]
    },
    {
      "type": "select",
      "id": "justify",
      "label": "t:labels.justify",
      "default": "flex-start",
      "options": [
        { "value": "flex-start", "label": "t:options.justify.start" },
        { "value": "center", "label": "t:options.justify.center" },
        { "value": "flex-end", "label": "t:options.justify.end" },
        { "value": "space-between", "label": "t:options.justify.space_between" },
        { "value": "space-around", "label": "t:options.justify.space_around" },
        { "value": "space-evenly", "label": "t:options.justify.space_evenly" }
      ]
    },
    {
      "type": "range",
      "id": "gap",
      "label": "t:labels.gap",
      "default": 0,
      "min": 0,
      "max": 50,
      "step": 1,
      "unit": "px"
    },
    {
      "type": "range",
      "id": "padding_top",
      "label": "t:labels.padding_top",
      "default": 0,
      "min": 0,
      "max": 50,
      "step": 1,
      "unit": "px"
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "label": "t:labels.padding_bottom",
      "default": 0,
      "min": 0,
      "max": 50,
      "step": 1,
      "unit": "px"
    },
    {
      "type": "range",
      "id": "padding_left",
      "label": "t:labels.padding_left",
      "default": 0,
      "min": 0,
      "max": 50,
      "step": 1,
      "unit": "px"
    },
    {
      "type": "range",
      "id": "padding_right",
      "label": "t:labels.padding_right",
      "default": 0,
      "min": 0,
      "max": 50,
      "step": 1,
      "unit": "px"
    },
    {
      "type": "range",
      "id": "max_width",
      "label": "t:labels.max_width",
      "default": 100,
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "%"
    },
    {
      "type": "range",
      "id": "max_height",
      "label": "t:labels.max_height",
      "default": 0,
      "min": 0,
      "max": 1000,
      "step": 10,
      "unit": "px"
    }
  ],
  "presets": [
    {
      "name": "t:general.column",
      "category": "t:general.layout",
      "settings": {
        "layout_direction": "group--vertical",
        "alignment": "flex-start",
        "justify": "flex-start",
        "gap": 0,
        "padding_top": 0,
        "padding_bottom": 0,
        "padding_left": 0,
        "padding_right": 0,
        "max_width": 100,
        "max_height": 0
      }
    },
    {
      "name": "t:general.row",
      "category": "t:general.layout",
      "settings": {
        "layout_direction": "group--horizontal",
        "alignment": "center",
        "justify": "space-between",
        "gap": 0,
        "padding_top": 0,
        "padding_bottom": 0,
        "padding_left": 0,
        "padding_right": 0,
        "max_width": 100,
        "max_height": 0
      }
    }
  ]
}
{% endschema %}
