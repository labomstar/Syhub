<details-modal class="header__search relative">
  <details>
    <!-- زر الأيقونة فقط -->
    <summary
      class="cursor-pointer p-2 flex items-center justify-center"
      aria-haspopup="dialog"
      aria-label="{{ 'general.search.search' | t }}"
    >
      <span class="svg-wrapper w-6 h-6">
        {% render 'icon-search' %}
      </span>
    </summary>

    <!-- المودال عند الفتح -->
    <div
      class="fixed inset-0 w-full left-0 z-50 h-[280px] bg-white flex items-center justify-center"
      role="dialog"
      aria-modal="true"
      aria-label="{{ 'general.search.search' | t }}"
    >
      <div class="absolute inset-0"></div>
      <!-- خلفية شفافة -->

      <div class="relative z-40 w-full max-w-3xl">
        <div class="flex max-w-7xl items-center justify-center mx-auto mb-4 py-3">
          <form
            action="{{ routes.search_url }}"
            method="get"
            role="search"
            class="w-1/2 flex items-center justify-between border border-gray-200 rounded-xl outline-0 gap-2 p-4"
          >
            <input
              id="{{ input_id }}"
              type="search"
              name="q"
              value="{{ search.terms | escape }}"
              placeholder="{{ 'general.search.search' | t }}"
              class="flex-1 px-4 text-lg border-0 outline-0 focus:outline-0 focus:border-0"
            >
            <!-- زر البحث (داخل الفورم) -->
            <button
              class="text-gray-600 hover:text-blue-600"
              aria-label="{{ 'general.search.search' | t }}"
            >
              <span class="w-5 h-5">
                {% render 'icon-search' %}
              </span>
            </button>
          </form>

          <!-- زر الإغلاق -->
          <button
            type="button"
            class="text-gray-600 hover:text-black"
            aria-label="{{ 'accessibility.close' | t }}"
            onclick="this.closest('details').removeAttribute('open')"
          >
            <span class="w-6 h-6">
              {% render 'icon-close' %}
            </span>
          </button>
        </div>
      </div>
    </div>
  </details>
</details-modal>
